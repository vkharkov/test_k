# test_k

Задумка в следующем - есть 2 кронскрипта: первый провверяет валидность адресов за 5 дней до истечения подписки, второй отправляет письма за 3 дня до исстечения подписки по проверенным адресам за 2дня до этого. В лучшем случае это 172800 адресов, в худшем 2880 - зависит от скорости проерки.
Скорее всего за 2 дня не удалится много ящиков, а те что станут недоступными можно пренебречь. 

В таблице users убрал поле email, оставил его только в emails, чтобы не приходиолсь вставлять в 2 таблицы одинаковые данные. Можно джоинить и по строкам, но инты будут быстрее. Скорее всего стоит подумать над одной таблицей что в теории будет экономнее для облачных баз (ex. AWS RDS).
Курсорная пагинация для ~~бедных~~ MySQL, тк OFFSET и LIMIT на больлших объемаах начнут тормозить в прогрессии ближе к концу таблицы.

Потенциальные проблемы:
- не успеют проверится все адреса перед отправкой
- проверка одно аадреса несколько раз платно, но эта сумма (стоимость проверки) скорее всего будет включена в стоимость подписки
- вероятно в реальлной жизни, на больших объемах данных может тормозить база при конвертации дат (скорее всего стоит рассчитывать интервалы в php, а в запрос вставлять уже готовые инты)
- утечки памяти в долгих циклах - стоит подумать про очереди
- вероятно стоит подумать о хранении pid процесса рассылки и чекера. В случае с мейлером это не критично тк он не отправит лишнего если не запускать 2 раза скрипт в один день, а вот с чекеромм могут быть лишние расходы. Вероятно стоит добавить дату последней отправки в таблицу emails для проверки.

PS В гит не пушил, а просто залил файлы)
